<!doctype html>
<html>
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="chrome=1">
    <title>Php-benchmark by victorjonsson</title>

    <link rel="stylesheet" href="stylesheets/styles.css">
    <link rel="stylesheet" href="stylesheets/pygment_trac.css">
    <script src="javascripts/scale.fix.js"></script>
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">
    <!--[if lt IE 9]>
    <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
  </head>
  <body>
    <div class="wrapper">
      <header>
        <h1 class="header">Php-benchmark</h1>
        <p class="header">Easy to use benchmark script for your PHP-application. Get information about average loading time, memory consumption and more...</p>

        <ul>
          <li class="download"><a class="buttons" href="https://github.com/victorjonsson/PHP-Benchmark/zipball/master">Download ZIP</a></li>
          <li class="download"><a class="buttons" href="https://github.com/victorjonsson/PHP-Benchmark/tarball/master">Download TAR</a></li>
          <li><a class="buttons github" href="https://github.com/victorjonsson/PHP-Benchmark">View On GitHub</a></li>
        </ul>

        <p class="header">This project is maintained by <a class="header name" href="https://github.com/victorjonsson">victorjonsson</a></p>


      </header>
      <section>
        <h1>PHP-Benchmark</h1>

<p>Easy to use benchmark script for your PHP-application. Gives you information about average memory peaks and time spent
on page generation. The test will do a number of requests to your application with a query parameter
that tells the benchmark script to monitor the time and memory consumption during the request. When all requests
is finished you will get the following information:</p>

<ul>
<li>Average time spent on generating the page</li>
<li>Average memory peak</li>
<li>Average number of included files</li>
<li>Average number of declared classes</li>
<li>The highest memory peak monitored during the test</li>
<li>The highest time spent on generating the page during the test</li>
<li>The number of failed requests (timeout or http status other then 200)</li>
</ul><p>You execute the tests via command line, either using PHP CLI or Nodejs CLI.</p>

<h3>Dependencies</h3>

<ul>
<li>PHP version &gt;= 5.2.1</li>
<li>allow_url_fopen has to be enabled in php.ini</li>
</ul><h2>Setup</h2>

<ol>
<li>Download the <a href="https://raw.github.com/victorjonsson/PHP-Benchmark/master/php-benchmark.php">script</a> to your server.</li>
<li>Open the file that is the first file to recieve the application request (this is usually index.php).</li>
<li>Include the benchmark script in the top of the file.</li>
</ol><h2>Usage</h2>

<h3>PHP Command Line Tool</h3>

<p>Open your shell interpreter and navigate to the directory where the index.php file of your appliaction is located. Use the following commands to run the
benchmark tests.</p>

<p><code>$ php index.php http://mywebsite.com/</code> Will do a benchmark test with 50 requests that gives you average page generation time, memory peak,
number of loaded classes and included files.</p>

<p><code>$ php index.php http://mywebsite.com/ -n 500</code> Will do a benchmark test with 500 requests.</p>

<p><code>$ php index.php http://mywebsite.com/ -nu</code> Will prevent the use of unique URL:s when requesting the application.</p>

<p><code>$ php index.php http://mywebsite.com/ -v</code> If a lot of the request fails it might be good to add <em>-v</em> to get more information about the failing requests.</p>

<p><code>$ php index.php http://mywebsite.com/ -f /var/log/</code> Will write ouput to log file in /var/log/.</p>

<p><code>$ php index.php http://mywebsite.com/ -f test.log</code> Will write ouput to log file test.log in current directory.</p>

<p><em>All options can of course be used together as well, these commands are only simple examples.</em></p>

<h3>Node Command Line Tool</h3>

<p>The execution of the test goes much faster if you use the nodejs CLI. First of all you need 
to <a href="http://nodejs.org/#download">install node</a> if you haven't already. After that you have installed node you have to
download the <a href="https://raw.github.com/victorjonsson/PHP-Benchmark/master/php-benchmark">nodejs script</a> to your server, name
the file <em>php-benchmark</em>. Then navigate to the directory where your nodejs script is located and run one of the 
following commands:</p>

<p><code>$ node php-benchmark http://mywebsite.com/</code> Will do a benchmark test with 50 requests that gives you average page generation time, memory peak,
number of loaded classes and included files.</p>

<p><code>$ node php-benchmark http://mywebsite.com/ -n 500</code> Will do a benchmark test with 500 requests.</p>

<p><code>$ node php-benchmark http://mywebsite.com/ -s 20</code> Will start 20 requests per second until all requests is
made. If you're doing this test to monitor the performance of your PHP code
(rather then load testing your server infrastructure) and having limited server resources it might be good to set this 
option as low as 1-2 requests per second.</p>

<p><code>$ node php-benchmark http://mywebsite.com/ -nu</code> Will prevent the use of unique URL:s when requesting the application.</p>

<p><code>$ node php-benchmark http://mywebsite.com/ -v</code> If a lot of the request fails it might be good to add <em>-v</em> to get more information about the failing requests.</p>

<p><code>$ node php-benchmark http://mywebsite.com/ -f /var/log/</code> Will write ouput to log file in /var/log/.</p>

<p><code>$ node php-benchmark http://mywebsite.com/ -f test.log</code> Will write ouput to log file test.log in current working directory.</p>

<p><em>All options can of course be used together as well, these commands are only simple examples.</em></p>

<h2>Display benchmark data on page load</h2>

<p>Benchmark data will be displayed in the browser upon page load if you add query
parameters <code>?php-benchmark-test=1&amp;display-test-data=1</code> to the URL of your application.</p>
      </section>
      <footer>
        <p><small>Hosted on <a href="https://pages.github.com">GitHub Pages</a> using the Dinky theme</small></p>
      </footer>
    </div>
    <!--[if !IE]><script>fixScale(document);</script><![endif]-->
		
  </body>
</html>
>>>>>>> 998df1794321a8488e1bb78cafa5d885d7e58704
